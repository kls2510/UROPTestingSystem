<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/core-collapse/core-collapse.html">
<link rel="import" href="../../bower_components/core-icon-button/core-icon-button.html">

<polymer-element name="static-list-item" attributes="text checkedIndex isDefault">
    <template>
        <link rel="stylesheet" href="static-list-item.css" shim-shadowdom>
        <link rel="stylesheet" href="../../codemirror.css"> <!-- CodeMirror with some custom styles -->

        <span layout horizontal>
            <core-icon-button
                    id="cmdToggleCode"
                    icon="unfold-more"
                    on-tap="{{toggle}}"></core-icon-button>
            <paper-input id="text" flex inputValue="{{text}}"></paper-input>
            <paper-radio-group>
                <paper-radio-button id="none"    name="none"    checked?="{{checkedIndex == 0}}"></paper-radio-button>
                <paper-radio-button id="warning" name="warning" checked?="{{checkedIndex == 1}}"></paper-radio-button>
                <paper-radio-button id="error"   name="error"   checked?="{{checkedIndex == 2}}"></paper-radio-button>
            </paper-radio-group>
        </span>
        <!-- <span style="margin-left: 50px">
            <paper-input multiline label="XML Code..."></paper-input>
        </span>-->

        <core-collapse id="collapse">
            <textarea id="edit">
<module name="Checker">
    <module name="TreeWalker">
        <!-- Checks for empty catch, do, if else, finally. try, for, while, and init blocks, but NOT empty exception declarations.
        Commented blocks do not count as empty -->
        <module name="EmptyBlock">
            <property name="tokens" value="LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_IF, LITERAL_FOR, LITERAL_TRY, LITERAL_WHILE, INSTANCE_INIT, STATIC_INIT"/>
            <property name="option" value="text"/> <!-- Without this, blocks containing only comments would count as being empty -->
            <message key="block.empty" value="Empty ''{0}'' block ~ if it should never run, a justifying comment in the block is required" />
        </module>
    </module>
</module>
            </textarea>
        </core-collapse>
    </template>
    <script src="../../codemirror-4.4/lib/codemirror.js"></script> <!-- CodeMirror -->
    <script src="../../codemirror-4.4/mode/xml/xml.js"></script> <!-- CodeMirror -->
    <script>
        Polymer('static-list-item', {
            ready: function() {
                //Initialise code mirror (provides xml syntax highlighting of a textarea)
                CodeMirror.fromTextArea(this.$.edit);
            },
            /**
             * Work around for a paper-radio-button bug. Without this, the initially selected button would
             * remain selected until it has been clicked at least once, no matter how many times the other
             * buttons in the group have been clicked
             */
            domReady: function() {
                switch (this.checkedIndex) {
                    case 0:
                        this.$.none.tap();
                        break;
                    case 1:
                        this.$.warning.tap();
                        break;
                    case 2:
                        this.$.error.tap();
                        break;
                }
            },
            toggle: function() {
                this.$.collapse.toggle();
                this.$.input = this.text;
            }
        });
    </script>
</polymer-element>